import{Q as L}from"./QSkeleton.fe02f028.js";import{Q as te}from"./QSpace.dfa275fa.js";import{Q as ae}from"./QToolbar.f296e630.js";import{_ as pe,h as ve,aF as me,i as xe,j as ye,a1 as h,H as M,aG as _e,a2 as A,o,l as d,m as x,k as e,e as C,w as s,F as g,n as t,t as p,x as u,y as J,aH as B,ap as v,aI as ge,I as T,a6 as be,ah as F,aJ as y,q as Q,ai as j,s as z}from"./index.b340747c.js";import{Q as we}from"./QToolbarTitle.440d1fa8.js";import{Q as he}from"./QPullToRefresh.dec1c06c.js";import{C as I}from"./ClosePopup.958d94b2.js";import{_ as ke,a as Ce}from"./SkeletonGridCard.a0609b5c.js";import{_ as $e}from"./ScreenError.29d1ac58.js";import{S as Ve}from"./ScreenNotFound.3391fb98.js";import{Q as Qe}from"./QInfiniteScroll.323eba28.js";import{T as je}from"./_value_.a344ab39.js";import{u as Se}from"./index.es.9bf2f817.js";import"./touch.9d375472.js";import"./selection.b3caa21c.js";import"./SkeletonCard.3d677a39.js";import"./forceHttp2.94a52bc8.js";import"./ranks.6b7a2e33.js";import"./index.a60c2c0b.js";import"./useCache.a72482f3.js";import"./_value_.7e1d0da8.js";const De={class:"fixed w-full top-0 left-0 z-200 bg-dark-page"},Te={class:"row text-subtitle1 text-[16px] py-4"},Be={class:"col-4 px-1"},Fe={key:0,class:"col-4 px-1"},ze={key:1,class:"col-4 px-1"},Ie={class:"col-4 px-1"},Ne={key:0,class:"text-center text-gray-500 mb-1"},Re={class:"row justify-center q-my-md"},Ge={class:"text-subtitle1 mx-1"},Ee={class:"text-subtitle1 mx-1"},Pe={class:"text-subtitle1 mx-1"},Ue={class:"text-subtitle1 mx-1"},qe={class:"relative"},Oe={class:"text-subtitle1 mx-1"},He={class:"text-subtitle1 mx-1"},Le={class:"text-subtitle1 mx-1"},Me={class:"text-subtitle1 mx-1"},Ae={class:"text-subtitle1 mx-1"},Je=ve({__name:"[value]",setup(Ke){const S=me(),se=xe(),{t:f}=ye(),R=h(),G=h(!1),E=h(!1),P=h(!1),N=h(!1),K=h(!1);let W=!1;const m=M(()=>{var _,a,l;const{type_normal:i,value:n}=S.params;switch(i){case"danh-sach":return{typer:n};case"the-loai":return W?{gener:(l=(a=(_=c.value)==null?void 0:_.filter)==null?void 0:a.gener.filter(r=>r.checked).map(r=>r.value))!=null?l:[n]}:{gener:[n]};case"season":{const[r,k]=typeof n=="string"?n.replace(/\/*$/,"").split("/"):n;return k?{seaser:r,year:k}:{seaser:r}}default:return{}}}),D=_e([]),b=h(null),$=h(null),w=h(null),V=h(null),X=M(()=>{var i;return[...(i=m.value.gener)!=null?i:[],...D]});A(m,i=>{var n,_,a,l,r,k;(_=b.value)!=null||(b.value=(n=i.seaser)!=null?n:null),(l=w.value)!=null||(w.value=(a=i.typer)!=null?a:null),(k=V.value)!=null||(V.value=(r=i.year)!=null?r:null)},{immediate:!0});const U=M(()=>{var i,n,_,a;return c.value&&c.value.filter&&[c.value.filter.gener.filter(l=>X.value.includes(l.value)).map(l=>l.text).join(", "),(i=c.value.filter.seaser.find(l=>l.value===b.value))==null?void 0:i.text,(n=c.value.filter.sorter.find(l=>l.value===$.value))==null?void 0:n.text,(_=c.value.filter.typer.find(l=>l.value===w.value))==null?void 0:_.text,(a=c.value.filter.year.find(l=>l.value===V.value))==null?void 0:a.text].filter(Boolean).join(" \u2022 ")}),q=h(!1);function ne(){!U.value||(D.splice(0),b.value=$.value=null,w.value=null,V.value=null)}function O(i){return D.indexOf(i)}function Y(i){const n=O(i);n>-1?D.splice(n,1):D.push(i)}const{data:c,run:Z,loading:oe,refreshAsync:ue,error:re}=Se(()=>ee(1,!1));function ee(i,n){const _=je(S.params.type_normal,typeof S.params.value=="string"?S.params.value.replace(/\/*$/,""):S.params.value,i,n,{genres:D,seaser:b.value,sorter:$.value,typer:w.value,year:V.value},m.value);return W=!0,_}const ie=i=>ue().then(()=>{var n;return(n=R.value)==null?void 0:n.reset()}).then(i),le=h(""),ce=A(c,i=>{!i||(le.value=i.title,ce())});A([X,b,$,w,V,m],()=>{var i;Z(),(i=R.value)==null||i.reset()},{deep:!0});let de=2;async function fe(i,n){var r;const{curPage:_,maxPage:a,items:l}=await ee(de++,!0);c.value=Object.assign((r=c.value)!=null?r:{},{items:[...c.value.items,...l],curPage:_,maxPage:a}),n(_===a)}return(i,n)=>{var _;return o(),d(g,null,[x("header",De,[e(c)?(o(),d(g,{key:1},[t(ae,{class:"relative"},{default:s(()=>[t(v,{flat:"",dense:"",round:"",class:"mr-2",onClick:n[0]||(n[0]=ge(a=>e(se).back(),["stop"]))},{default:s(()=>[t(e(T),{icon:"fluent:chevron-left-24-regular",width:"25",height:"25"})]),_:1}),t(te),t(we,{class:"absolute left-[50%] top-[50%] transform translate-x-[-50%] translate-y-[-50%] text-[16px] max-w-[calc(100%-34px*2)] line-clamp-1"},{default:s(()=>[p(u(e(S).params.type_normal==="danh-sach"&&e(S).params.value==="all"?"M\u1EE5c l\u1EE5c":le.value),1)]),_:1}),t(v,{flat:"",dense:"",round:"",onClick:n[1]||(n[1]=a=>N.value=!0)},{default:s(()=>[t(e(T),{icon:"fluent:filter-24-regular",width:"24",height:"24"})]),_:1})]),_:1}),x("div",Te,[x("div",Be,[x("div",{class:"bg-dark-700 px-4 text-zinc-400 py-1 h-[45px] flex items-center justify-between",onClick:n[2]||(n[2]=a=>G.value=!0)},[p(u(e(f)("the-loai"))+" ",1),t(e(T),{icon:"fluent:chevron-down-24-regular"})])]),e(m).typer?(o(),d("div",Fe,[x("div",{class:"bg-dark-700 px-4 text-zinc-400 py-1 h-[45px] flex items-center justify-between",onClick:n[3]||(n[3]=a=>E.value=!0)},[p(u(e(f)("mua"))+" ",1),t(e(T),{icon:"fluent:chevron-down-24-regular"})])])):(o(),d("div",ze,[x("div",{class:"bg-dark-700 px-4 text-zinc-400 py-1 h-[45px] flex items-center justify-between",onClick:n[4]||(n[4]=a=>P.value=!0)},[p(u(e(f)("loai"))+" ",1),t(e(T),{icon:"fluent:chevron-down-24-regular"})])])),x("div",Ie,[x("div",{class:"bg-dark-700 px-4 text-zinc-400 py-1 h-[45px] flex items-center justify-between",onClick:n[5]||(n[5]=a=>N.value=!0)},[p(u(e(f)("sap-xep"))+" ",1),t(e(T),{icon:"fluent:chevron-down-24-regular"})])])]),e(U)?(o(),d("div",Ne,u(e(f)("da-chon-textfilter",[e(U)])),1)):J("",!0)],64)):(o(),C(ae,{key:0,class:"relative"},{default:s(()=>[t(L,{type:"QBtn",flat:"",dense:"",round:""}),t(te),t(L,{type:"text",class:"absolute left-[50%] top-[50%] transform translate-x-[-50%] translate-y-[-50%] text-[16px]",width:"120px"}),t(L,{type:"QBtn",flat:"",dense:"",round:""})]),_:1}))]),e(oe)?(o(),C(ke,{key:0,count:12,class:"pt-[125px]"})):e(c)?(o(),d(g,{key:1},[e(c).items.length===0?(o(),C(Ve,{key:0,class:"pt-[125px]"})):(o(),C(he,{key:1,onRefresh:ie,class:"pt-[125px]"},{default:s(()=>[t(e(Qe),{ref_key:"infiniteScrollRef",ref:R,onLoad:fe,offset:250},{loading:s(()=>[x("div",Re,[t(be,{class:"c--main",size:"40px"})])]),default:s(()=>[t(Ce,{items:e(c).items},null,8,["items"])]),_:1},512)]),_:1}))],64)):(o(),C($e,{key:2,"onClick:retry":e(Z),class:"pt-[125px]",error:e(re)},null,8,["onClick:retry","error"])),(_=e(c))!=null&&_.filter?(o(),d(g,{key:3},[t(B,{modelValue:G.value,"onUpdate:modelValue":n[7]||(n[7]=a=>G.value=a),position:"bottom","no-route-dismiss":"",class:"children:!px-0","full-width":""},{default:s(()=>[t(F,{flat:"",class:"w-full pt-3 !max-h-[60vh]"},{default:s(()=>[t(y,{class:"py-0 flex items-center justify-between"},{default:s(()=>[x("div",Ge,u(e(f)("loai")),1),t(v,{dense:"",flat:"","no-caps":"",class:"text-weight-normal",onClick:n[6]||(n[6]=a=>D.splice(0))},{default:s(()=>[p(u(e(f)("dat-lai")),1)]),_:1})]),_:1}),t(y,{class:"row"},{default:s(()=>{var a;return[(o(!0),d(g,null,Q((a=e(c))==null?void 0:a.filter.gener,l=>{var r,k;return o(),d("div",{key:l.value,class:"col-4 col-sm-3 col-md-4 px-1 py-1"},[t(v,{dense:"","no-caps":"",flat:"",class:j(["py-2 bg-[#292929] text-weight-normal w-full ease-bg",{"bg-main":((r=e(m).gener)==null?void 0:r.includes(l.value))||O(l.value)>-1}]),disable:(k=e(m).gener)==null?void 0:k.includes(l.value),onClick:H=>Y(l.value)},{default:s(()=>[p(u(l.text),1)]),_:2},1032,["disable","onClick","class"])])}),128))]}),_:1}),z((o(),C(v,{flat:"","no-caps":"",class:"w-full py-2 mb-2"},{default:s(()=>[p(u(e(f)("huy")),1)]),_:1})),[[I]])]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:E.value,"onUpdate:modelValue":n[9]||(n[9]=a=>E.value=a),position:"bottom","no-route-dismiss":"",class:"children:!px-0","full-width":""},{default:s(()=>[t(F,{flat:"",class:"w-full pt-3"},{default:s(()=>[t(y,{class:"py-0 flex items-center justify-between"},{default:s(()=>[x("div",Ee,u(e(f)("mua")),1),t(v,{dense:"",flat:"","no-caps":"",class:"text-weight-normal",onClick:n[8]||(n[8]=a=>b.value=null)},{default:s(()=>[p(u(e(f)("dat-lai")),1)]),_:1})]),_:1}),t(y,{class:"row"},{default:s(()=>{var a;return[(o(!0),d(g,null,Q((a=e(c))==null?void 0:a.filter.seaser,l=>(o(),d("div",{key:l.value,class:"col-4 col-sm-3 col-md-4 px-1 py-1"},[t(v,{dense:"","no-caps":"",flat:"",class:j(["py-2 bg-[#292929] text-weight-normal w-full ease-bg",{"bg-main":e(m).seaser===l.value||b.value===l.value}]),disable:!!e(m).seaser,onClick:r=>b.value=l.value},{default:s(()=>[p(u(l.text),1)]),_:2},1032,["disable","onClick","class"])]))),128))]}),_:1}),z((o(),C(v,{flat:"","no-caps":"",class:"w-full py-2 mb-2"},{default:s(()=>[p(u(e(f)("huy")),1)]),_:1})),[[I]])]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:P.value,"onUpdate:modelValue":n[11]||(n[11]=a=>P.value=a),position:"bottom","no-route-dismiss":"",class:"children:!px-0","full-width":""},{default:s(()=>[t(F,{flat:"",class:"w-full pt-3"},{default:s(()=>[t(y,{class:"py-0 flex items-center justify-between"},{default:s(()=>[x("div",Pe,u(e(f)("loai")),1),t(v,{dense:"",flat:"","no-caps":"",class:"text-weight-normal",onClick:n[10]||(n[10]=a=>w.value=null)},{default:s(()=>[p(u(e(f)("dat-lai")),1)]),_:1})]),_:1}),t(y,{class:"row"},{default:s(()=>{var a;return[(o(!0),d(g,null,Q((a=e(c))==null?void 0:a.filter.typer,l=>(o(),d("div",{key:l.value,class:"col-4 col-sm-3 col-md-4 px-1 py-1"},[t(v,{dense:"","no-caps":"",flat:"",class:j(["py-2 bg-[#292929] text-weight-normal w-full ease-bg",{"bg-main":e(m).typer===l.value||w.value===l.value}]),disable:!!e(m).typer,onClick:r=>w.value=l.value},{default:s(()=>[p(u(l.text),1)]),_:2},1032,["disable","onClick","class"])]))),128))]}),_:1}),z((o(),C(v,{flat:"","no-caps":"",class:"w-full py-2 mb-2"},{default:s(()=>[p(u(e(f)("huy")),1)]),_:1})),[[I]])]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:N.value,"onUpdate:modelValue":n[13]||(n[13]=a=>N.value=a),position:"bottom","no-route-dismiss":"",class:"children:!px-0","full-width":""},{default:s(()=>[t(F,{flat:"",class:"w-full pt-3"},{default:s(()=>[t(y,{class:"py-0 flex items-center justify-between"},{default:s(()=>[x("div",Ue,u(e(f)("sap-xep")),1),t(v,{dense:"",flat:"","no-caps":"",class:"text-weight-normal",onClick:n[12]||(n[12]=a=>$.value=null)},{default:s(()=>[p(u(e(f)("dat-lai")),1)]),_:1})]),_:1}),t(y,{class:"row"},{default:s(()=>{var a;return[(o(!0),d(g,null,Q((a=e(c))==null?void 0:a.filter.sorter,l=>(o(),d("div",{key:l.value,class:"col-4 col-sm-3 col-md-4 px-1 py-1"},[t(v,{dense:"","no-caps":"",flat:"",class:j(["py-2 bg-[#292929] text-weight-normal w-full ease-bg",{"bg-main":$.value===l.value}]),onClick:r=>$.value=l.value},{default:s(()=>[p(u(l.text),1)]),_:2},1032,["onClick","class"])]))),128))]}),_:1}),z((o(),C(v,{flat:"","no-caps":"",class:"w-full py-2 mb-2"},{default:s(()=>[p(u(e(f)("huy")),1)]),_:1})),[[I]])]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:K.value,"onUpdate:modelValue":n[15]||(n[15]=a=>K.value=a),position:"bottom","no-route-dismiss":"","full-width":""},{default:s(()=>[t(F,{flat:"",class:"w-full pt-3 !max-h-[60vh]"},{default:s(()=>[x("div",qe,[t(y,{class:"py-0 flex items-center justify-between"},{default:s(()=>[x("div",Oe,u(e(f)("sap-xep-theo")),1),t(v,{dense:"",flat:"","no-caps":"",class:"text-weight-normal",onClick:ne},{default:s(()=>[p(u(e(f)("dat-lai")),1)]),_:1})]),_:1}),t(y,{class:"row"},{default:s(()=>{var a;return[(o(!0),d(g,null,Q((a=e(c))==null?void 0:a.filter.sorter,l=>(o(),d("div",{key:l.value,class:"col-4 col-sm-3 col-md-4 px-1 py-1"},[t(v,{dense:"","no-caps":"",flat:"",class:j(["py-2 bg-[#292929] text-weight-normal w-full ease-bg",{"bg-main":$.value===l.value}]),onClick:r=>$.value=l.value},{default:s(()=>[p(u(l.text),1)]),_:2},1032,["onClick","class"])]))),128))]}),_:1}),t(y,{class:"py-0"},{default:s(()=>[x("div",He,u(e(f)("the-loai")),1)]),_:1}),t(y,{class:"row"},{default:s(()=>{var a,l;return[(o(!0),d(g,null,Q(q.value?(a=e(c))==null?void 0:a.filter.gener:(l=e(c))==null?void 0:l.filter.gener.slice(0,11),r=>{var k,H;return o(),d("div",{key:r.value,class:"col-4 col-sm-3 col-md-4 px-1 py-1"},[t(v,{dense:"","no-caps":"",flat:"",class:j(["py-2 bg-[#292929] text-weight-normal w-full min-h-10 ease-bg",{"bg-main":((k=e(m).gener)==null?void 0:k.includes(r.value))||O(r.value)>-1}]),disable:(H=e(m).gener)==null?void 0:H.includes(r.value),onClick:We=>Y(r.value)},{default:s(()=>[p(u(r.text),1)]),_:2},1032,["disable","onClick","class"])])}),128)),q.value?J("",!0):(o(),d("div",{key:0,onClick:n[14]||(n[14]=r=>q.value=!0),class:"col-4 col-sm-3 col-md-4 px-1 py-1"},[t(v,{dense:"","no-caps":"",flat:"",class:"py-2 bg-[#292929] text-weight-normal w-full ease-bg min-h-10"},{default:s(()=>[t(e(T),{icon:"fluent:chevron-down-24-regular"})]),_:1})]))]}),_:1}),t(y,{class:"py-0"},{default:s(()=>[x("div",Le,u(e(f)("loai")),1)]),_:1}),t(y,{class:"row"},{default:s(()=>{var a;return[(o(!0),d(g,null,Q((a=e(c))==null?void 0:a.filter.typer,l=>(o(),d("div",{key:l.value,class:"col-4 col-sm-3 col-md-4 px-1 py-1"},[t(v,{dense:"","no-caps":"",flat:"",class:j(["py-2 bg-[#292929] text-weight-normal w-full ease-bg",{"bg-main":e(m).typer===l.value||w.value===l.value}]),disable:!!e(m).typer,onClick:r=>w.value=l.value},{default:s(()=>[p(u(l.text),1)]),_:2},1032,["disable","onClick","class"])]))),128))]}),_:1}),t(y,{class:"py-0"},{default:s(()=>[x("div",Me,u(e(f)("mua")),1)]),_:1}),t(y,{class:"row"},{default:s(()=>{var a;return[(o(!0),d(g,null,Q((a=e(c))==null?void 0:a.filter.seaser,l=>(o(),d("div",{key:l.value,class:"col-4 col-sm-3 col-md-4 px-1 py-1"},[t(v,{dense:"","no-caps":"",flat:"",class:j(["py-2 bg-[#292929] text-weight-normal w-full ease-bg",{"bg-main":e(m).seaser===l.value||b.value===l.value}]),disable:!!e(m).seaser,onClick:r=>b.value=l.value},{default:s(()=>[p(u(l.text),1)]),_:2},1032,["disable","onClick","class"])]))),128))]}),_:1}),t(y,{class:"py-0"},{default:s(()=>[x("div",Ae,u(e(f)("nam")),1)]),_:1}),t(y,{class:"row"},{default:s(()=>{var a;return[(o(!0),d(g,null,Q((a=e(c))==null?void 0:a.filter.year,l=>(o(),d("div",{key:l.value,class:"col-4 col-sm-3 col-md-4 px-1 py-1"},[t(v,{dense:"","no-caps":"",flat:"",class:j(["py-2 bg-[#292929] text-weight-normal w-full ease-bg",{"bg-main":e(m).year===l.value||V.value===l.value}]),disable:!!e(m).year,onClick:r=>V.value=l.value},{default:s(()=>[p(u(l.text),1)]),_:2},1032,["disable","onClick","class"])]))),128))]}),_:1})]),z((o(),C(v,{flat:"","no-caps":"",class:"w-full py-2 mb-2"},{default:s(()=>[p(u(e(f)("huy")),1)]),_:1})),[[I]])]),_:1})]),_:1},8,["modelValue"])],64)):J("",!0)],64)}}});var _l=pe(Je,[["__scopeId","data-v-c33eff5a"]]);export{_l as default};
