import{_ as D,h as N,j as T,b5 as $,i as q,b4 as z,a1 as x,o as u,l as C,m as l,n as e,w as t,k as a,F as I,b7 as L,ap as d,aH as R,y as j,aI as V,I as p,t as c,x as n,e as _,s as b,ah as A,aJ as P,b8 as F,R as H}from"./index.b340747c.js";import{Q as M}from"./QToolbarTitle.440d1fa8.js";import{Q as U}from"./QToolbar.f296e630.js";import{Q as w}from"./QItemLabel.04b33259.js";import{b as E,a as y,Q as f}from"./QList.49fcf7be.js";import{C as J}from"./ClosePopup.958d94b2.js";import{f as G,Q as K}from"./forceHttp2.94a52bc8.js";const O={class:"fixed w-full top-0 left-0 z-200 bg-dark-page"},W={class:"py-15 text-center pt-[47px]"},X={class:"flex items-center flex-nowrap"},Y={class:"flex items-center flex-nowrap"},Z={class:"flex items-center flex-nowrap"},ee={class:"mx-3"},te={class:"flex justify-between"},ae={class:"flex-1 text-center text-subtitle1"},se=["onSubmit"],oe={class:"mb-10 relative flex items-center flex-nowrap input-wrap"},le=["type","placeholder"],ne={class:"text-grey py-1"},ie=N({__name:"edit-profile",setup(re){const{t:s}=T(),h=$(),k=q(),r=z(),g=x(!1),v=x(!1),m=x("");async function S(){const Q=h.loading.show({message:s("dang-xac-thuc-vui-long-doi"),boxClass:"bg-dark text-light-9",spinnerColor:"main",delay:1/0});try{await r.changePassword(m.value),g.value=!1,h.notify({position:"bottom-right",message:s("da-doi-mat-khau")}),m.value=""}catch(o){console.error(o),h.notify({position:"bottom-right",message:s("doi-mat-khau-that-bai"),caption:o.message})}finally{Q()}}async function B(){await r.logout(),k.back(),h.notify({position:"bottom-right",message:s("da-dang-xuat")})}return(Q,o)=>(u(),C(I,null,[l("header",O,[e(U,{class:"relative"},{default:t(()=>[e(d,{flat:"",dense:"",round:"",class:"mr-2",onClick:o[0]||(o[0]=V(i=>a(k).back(),["stop"]))},{default:t(()=>[e(a(p),{icon:"fluent:chevron-left-24-regular",width:"25",height:"25"})]),_:1}),e(M,{class:"absolute left-[50%] top-[50%] transform translate-x-[-50%] translate-y-[-50%] text-[16px] max-w-[calc(100%-34px*2)] line-clamp-1"},{default:t(()=>[c(n(a(s)("tai-khoan")),1)]),_:1})]),_:1})]),a(r).isLogged?(u(),C(I,{key:0},[l("div",W,[e(L,{size:"80px"},{default:t(()=>{var i;return[(i=a(r).user)!=null&&i.avatar?(u(),_(a(K),{key:0,src:a(G)(a(r).user.avatar),referrerpolicy:"no-referrer"},null,8,["src"])):(u(),_(a(p),{key:1,icon:"fluent:person-circle-20-filled",width:"80",height:"80"})),e(d,{round:"",rounded:"",icon:"camera",class:"absolute bottom-0 right-0 bg-[rgba(0,0,0,0.5)]",size:"sm"})]}),_:1})]),e(E,{class:"text-[15px]"},{default:t(()=>[e(y,null,{default:t(()=>[e(f,null,{default:t(()=>[e(w,null,{default:t(()=>[c(n(a(s)("ten")),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[l("div",X,n(a(r).user.name),1)]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(f,null,{default:t(()=>[e(w,null,{default:t(()=>[c(n(a(s)("email")),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[l("div",Y,n(a(r).user.email),1)]),_:1})]),_:1}),b((u(),_(y,{clickable:"",onClick:o[1]||(o[1]=i=>g.value=!0)},{default:t(()=>[e(f,null,{default:t(()=>[e(w,null,{default:t(()=>[c(n(a(s)("doi-mat-khau")),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[l("div",Z,[e(a(p),{icon:"fluent:chevron-right-24-regular",width:"18",height:"18",class:"ml-2"})])]),_:1})]),_:1})),[[H]])]),_:1}),l("div",ee,[e(d,{outline:"",rounded:"",color:"red-5",class:"w-full mt-10",onClick:B},{default:t(()=>[c(n(a(s)("dang-xuat")),1)]),_:1})]),e(R,{modelValue:g.value,"onUpdate:modelValue":o[4]||(o[4]=i=>g.value=i),position:"bottom",class:"children:!px-0","full-width":""},{default:t(()=>[e(A,{class:"h-[60vh] bg-dark-500"},{default:t(()=>[e(P,null,{default:t(()=>[l("div",te,[e(d,{dense:"",round:""}),l("div",ae,n(a(s)("doi-mat-khau")),1),b(e(d,{dense:"",round:"",icon:"close"},null,512),[[J]])])]),_:1}),e(P,null,{default:t(()=>[l("form",{onSubmit:V(S,["prevent"])},[l("div",oe,[b(l("input",{"onUpdate:modelValue":o[2]||(o[2]=i=>m.value=i),required:"",type:v.value?"text":"password",name:"new_password",class:"input",placeholder:a(s)("mat-khau-moi")},null,8,le),[[F,m.value]]),e(d,{dense:"",round:"",class:"mr-1",onClick:o[3]||(o[3]=i=>v.value=!v.value)},{default:t(()=>[v.value?(u(),_(a(p),{key:0,icon:"fluent:eye-24-regular",width:"22",height:"22"})):(u(),_(a(p),{key:1,icon:"fluent:eye-off-24-regular"}))]),_:1})]),l("div",ne,n(a(s)("quan-trong-hay-nho-mat-khau-ban-thay-doi-vi-no-kho-co-the-khoi-phuc-lai-duoc-neu-bi-mat")),1),e(d,{type:"submit",rounded:"","no-caps":"",class:"text-main w-full",outline:"",disable:!m.value},{default:t(()=>[c(n(a(s)("doi-mat-khau")),1)]),_:1},8,["disable"])],40,se)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):j("",!0)],64))}});var he=D(ie,[["__scopeId","data-v-3ac2c887"]]);export{he as default};
